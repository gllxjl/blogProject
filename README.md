博客系统（Django + Redis 实现阅读量缓存）

1、项目简介
本项目是一个基于 Django 框架的博客系统，支持博客文章的创建、展示与详情查看。系统重点设计了高性能的文章阅读量统计功能，使用 Redis 作为缓存，结合异步数据库更新，实现了性能优化与数据一致性保障。
1.1、技术栈
- 后端框架：Django 5.2+
- 数据库：SQLite
- 缓存中间件：Redis
- 前端：Django Template
- Python 版本：3.12+

1.2、系统架构（MTV 模型）
    模块                         职责说明                                         
    Model               `Blog` 模型，定义数据结构及数据库交互                
  Template             HTML 模板，用于展示博客列表、详情和创建页面        
    View                 请求处理函数，调用服务模块，返回渲染结果           
此外，系统引入 `services/` 目录，封装 Redis 缓存逻辑、数据库操作与阅读量业务逻辑，遵循高内聚低耦合原则。

2、阅读量统计机制设计
2.1、核心机制
缓存优先读取：缓存存在则直接加一；否则从数据库读取并写入缓存。
异步数据库更新：使用 `threading.Thread` 实现非阻塞的数据库更新。
缓存自动过期：缓存数据设置 1 小时过期，减少内存占用。
降级处理：当 Redis 异常时，自动切换为数据库读写，系统不中断。
缓存命中率统计：通过 Redis `INFO` 指令获取 `keyspace_hits` 与 `keyspace_misses`。

2.2、Redis 缓存键设计
键名格式：blog_read_count_{blog_id}
示例：blog_read_count_1

3、项目结构概览
myblog/
├── blog/
│   ├── models.py                # 博客数据模型
│   ├── views.py                 # 请求处理逻辑
│   ├── urls.py                  # 路由配置
│   ├── templates/               # 页面模板
│   └── services/                # 缓存与数据库业务封装
├── myblog/                      # 项目主配置
├── manage.py
└── README.md


4、快速开始
4.1、环境准备
确保本地安装有：
Python 3.12+
Redis 服务（本地或远程）

4.2、安装依赖

4.3、数据库迁移
python manage.py makemigrations
python manage.py migrate

4.4、访问路径
博客列表页：http://127.0.0.1:8000/blog/
新增博客页：http://127.0.0.1:8000/blog/add/
博客详情页：http://127.0.0.1:8000/blog/<id>/

5、本地开发迭代日志
  日期	              改动内容	                                       原因 / 目的说明
2025/7/7	      初始化 Django 项目与 blog 应用	                   项目基本框架搭建，完成启动测试
2025/7/7	      创建 Blog 模型并迁移数据库	                       定义博客数据结构，准备文章存储
2025/7/7	      编写博客列表页与详情页 view + 模板	               实现基本文章展示功能
2025/7/8	      添加新增博客功能（表单 + 提交逻辑）	               支持发布博客
2025/7/8	      集成 Redis 缓存，封装 CacheService	               为优化性能设计阅读量缓存模块
2025/7/8	      封装数据库服务模块 DBService	                     解耦 view 和 DB 逻辑，增强可维护性
2025/7/8	      编写 ReadService，实现阅读量+缓存读写	             提供业务层接口，支持读写分离和回退
2025/7/9	      增加异步数据库更新逻辑（threading）	               避免同步更新带来的响应延迟，提升用户体验
2025/7/9	      增加 Redis 异常降级处理	                         保证在 Redis 不可用时系统仍能运行
2025/7/10	      增加缓存命中率统计函数	                           为后续性能评估与优化准备
2025/7/10	      完善模板样式与页面跳转	                           改善用户体验，添加返回按钮和操作链接
2025/7/11	      编写 README 与说明文档	                           提供项目结构、设计说明与运行指南
